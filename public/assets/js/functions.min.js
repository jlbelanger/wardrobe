function onChangeCategory(e){const t=e.target.getAttribute("value"),o=document.getElementById(`category-${t}`);if(!!o.classList.contains("hide")){loadImage(o.querySelector(".carousel__item:not(.hide)"))}o.classList.toggle("hide")}const $categoryCheckboxes=document.querySelectorAll(".category__checkbox");function debounce(e,t,o){let n;return function(){const s=this,r=arguments,c=function(){n=null,o||e.apply(s,r)},a=o&&!n;clearTimeout(n),n=setTimeout(c,t),a&&e.apply(s,r)}}function isMatch(){let e=null;const t=document.querySelectorAll(".carousel__container:not(.hide) .carousel"),o=t.length;let n,s,r,c;for(n=0;n<o;n+=1)if(s=t[n],r=s.querySelectorAll(".carousel__item:not(.hide)"),c=r[s.getAttribute("data-index")],null===e)e=c.getAttribute("data-colour-id");else if(c.getAttribute("data-colour-id")!==e)return!1;return!0}function onClickDressMe(){if(isMatch())document.body.classList.add("flash"),setTimeout((()=>{document.body.classList.remove("flash")}),500);else{const e=document.getElementById("mismatch-container");e.classList.remove("hide"),setTimeout((()=>{e.classList.add("hide")}),1e3)}}Array.from($categoryCheckboxes).forEach((e=>{e.addEventListener("change",onChangeCategory)}));const $dressMe=document.getElementById("dress-me");function getAnimationDelay(e){return 150*e+100}function setAnimation(e,t){var o=getAnimationDelay(e);t.style.animationDelay=o+"ms",t.style.animationName="appear"}function animate(){document.getElementById("hangers").remove();const e=document.querySelectorAll(".carousel__container"),t=e.length;let o,n=0;for(o=0;o<t;o++)e[o].classList.contains("hide")||(setAnimation(n,e[o]),n+=1);const s=document.getElementById("browse");setAnimation(n,s);const r=document.getElementById("dress-me");setAnimation(n,r);const c=getAnimationDelay(n+1);setTimeout((()=>{e.forEach((e=>{e.classList.remove("invisible")})),s.classList.remove("invisible"),r.classList.remove("invisible")}),c)}function onLoad(){const e=document.getElementById("seasons");e.value!==e.getAttribute("data-default")&&onChangeSeason({target:e});const t=document.querySelectorAll(".category__checkbox");Array.from(t).forEach((e=>{const t=e.getAttribute("data-default");(e.checked&&!t||!e.checked&&t)&&onChangeCategory({target:e})})),setTimeout(animate,1e3)}function onClickBack(e){const t=e.target.closest(".carousel__container").querySelector(".carousel"),o=parseInt(t.getAttribute("data-index"),10),n=t.querySelectorAll(".carousel__item:not(.hide)"),s=n.length;let r;r=o>0?o-1:s-1,scrollToItem(t,n,r)}function onMousedownBack(e){0!==e.button||e.altKey||e.ctrlKey||e.metaKey||e.shiftKey||(onClickBack(e),window.BACK_INTERVAL=setInterval((()=>{onClickBack(e)}),400))}function onMouseupBack(){clearTimeout(window.BACK_INTERVAL),window.BACK_INTERVAL=null}function onKeypressBack(e){" "!==e.key&&"Enter"!==e.key||onClickBack(e)}$dressMe.addEventListener("click",onClickDressMe),window.addEventListener("load",onLoad);const $backButtons=document.querySelectorAll(".carousel-button--back");function onClickNext(e){const t=e.target.closest(".carousel__container").querySelector(".carousel"),o=parseInt(t.getAttribute("data-index"),10),n=t.querySelectorAll(".carousel__item:not(.hide)");let s;s=o<n.length-1?o+1:0,scrollToItem(t,n,s)}function onMousedownNext(e){0!==e.button||e.altKey||e.ctrlKey||e.metaKey||e.shiftKey||(onClickNext(e),window.NEXT_INTERVAL=setInterval((()=>{onClickNext(e)}),400))}function onMouseupNext(){clearTimeout(window.NEXT_INTERVAL),window.NEXT_INTERVAL=null}function onKeypressNext(e){" "!==e.key&&"Enter"!==e.key||onClickNext(e)}Array.from($backButtons).forEach((e=>{e.addEventListener("keypress",onKeypressBack),e.addEventListener("mousedown",onMousedownBack),e.addEventListener("mouseup",onMouseupBack)}));const $nextButtons=document.querySelectorAll(".carousel-button--next");function randomizeCarousel(e){const t=parseInt(e.getAttribute("data-index"),10),o=e.querySelectorAll(".carousel__item:not(.hide)"),n=o.length;let s;do{s=Math.floor(Math.random()*n)}while(s===t);scrollToItem(e,o,s,"auto")}function onClickOk(e){const t=e.target.closest(".carousel__container").querySelector(".carousel");window.DISABLE_SCROLL=!0,randomizeCarousel(t),setTimeout((()=>{window.DISABLE_SCROLL=!1}),100)}Array.from($nextButtons).forEach((e=>{e.addEventListener("keypress",onKeypressNext),e.addEventListener("mousedown",onMousedownNext),e.addEventListener("mouseup",onMouseupNext)}));const $okButtons=document.querySelectorAll(".carousel-button--ok");function onClickBrowse(){window.DISABLE_SCROLL=!0;document.querySelectorAll(".carousel__container:not(.hide) .carousel").forEach((e=>{randomizeCarousel(e)})),setTimeout((()=>{window.DISABLE_SCROLL=!1}),100)}Array.from($okButtons).forEach((e=>{e.addEventListener("click",onClickOk)}));const $browse=document.getElementById("browse");function onResize(){window.DISABLE_SCROLL=!0,window.RESIZE_TIMEOUT&&clearTimeout(window.RESIZE_TIMEOUT),window.RESIZE_TIMEOUT=setTimeout(onResize2,250)}function onResize2(){const e=document.querySelectorAll(".carousel");Array.from(e).forEach((e=>{const t=e.querySelectorAll(".carousel__item:not(.hide)");scrollToItem(e,t,parseInt(e.getAttribute("data-index"),10),"auto")})),setTimeout((()=>{window.DISABLE_SCROLL=!1}),100)}function onScrollList(e){if(window.DISABLE_SCROLL)return;const t=e.target.closest(".carousel"),o=e.target.querySelectorAll(".carousel__item:not(.hide)"),n=o.length;let s,r;for(s=0;s<n;s+=1){r=o[s];const e=r.getBoundingClientRect();e.left>=-1*e.width&&e.right<=2*e.width&&(loadImage(r),t.setAttribute("data-index",s))}}$browse.addEventListener("click",onClickBrowse),window.addEventListener("resize",onResize);const $lists=document.querySelectorAll(".carousel__list");function onChangeSeason(e){const t=e.target.value,o=document.querySelectorAll("[data-season-ids]");Array.from(o).forEach((e=>{e.getAttribute("data-season-ids").includes(t)?e.classList.remove("hide"):e.classList.add("hide")}));const n=document.querySelectorAll(".carousel__list");Array.from(n).forEach((e=>{onScrollList({target:e})}))}Array.from($lists).forEach((e=>{e.addEventListener("scroll",onScrollList)}));const $seasons=document.getElementById("seasons");function loadImage(e){const t=e.getAttribute("data-src");t&&(e.style.backgroundImage=`url('${t}')`,e.removeAttribute("data-src"))}function scrollToItem(e,t,o,n="smooth"){const s=t[o];loadImage(s),s.scrollIntoView({block:"nearest",behavior:n}),e.setAttribute("data-index",o)}$seasons.addEventListener("change",onChangeSeason);