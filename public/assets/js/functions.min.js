(()=>{"use strict";const e=e=>{const t=e.getAttribute("data-src");t&&(e.style.backgroundImage=`url('${t}')`,e.removeAttribute("data-src"))},t=(t,o,n)=>{const r=o[n];e(r);const c=t.querySelector(".carousel__list"),s=r.getBoundingClientRect();c.scrollTo({left:n*s.width,behavior:"smooth"}),t.setAttribute("data-index",n)},o=t=>{const o=t.target.getAttribute("value"),n=document.getElementById(`category-${o}`);if(!!n.classList.contains("hide")){const t=n.querySelector(".carousel__item:not(.hide)");e(t)}n.classList.toggle("hide")};function n(){if(function(){let e=null;const t=document.querySelectorAll(".carousel__container:not(.hide) .carousel"),o=t.length;let n,r,c,s;for(n=0;n<o;n+=1)if(r=t[n],c=r.querySelectorAll(".carousel__item:not(.hide)"),s=c[r.getAttribute("data-index")],null===e)e=s.getAttribute("data-colour-id");else if(s.getAttribute("data-colour-id")!==e)return!1;return!0}())document.body.classList.add("flash"),setTimeout((()=>{document.body.classList.remove("flash")}),500);else{const e=document.getElementById("mismatch-container");e.classList.remove("hide"),setTimeout((()=>{e.classList.add("hide")}),1e3)}}const r=t=>{if(window.DISABLE_SCROLL)return;const o=t.target.closest(".carousel");if(t.target.closest(".carousel__container").classList.contains("hide"))return;const n=t.target.querySelectorAll(".carousel__item:not(.hide)"),r=n.length;let c,s;const l=document.getElementById("content-middle").offsetLeft;for(c=0;c<r;c+=1){s=n[c];const t=s.getBoundingClientRect();t.left-l>=-1*t.width-1&&t.right-l<=2*t.width+1&&(e(s),o.setAttribute("data-index",c))}},c=e=>{const t=e.target.value,o=document.querySelectorAll("[data-season-ids]");Array.from(o).forEach((e=>{e.getAttribute("data-season-ids").includes(t)?e.classList.remove("hide"):e.classList.add("hide")}));const n=document.querySelectorAll(".carousel__list");Array.from(n).forEach((e=>{r({target:e})}))};function s(e){return 150*e+100}function l(e,t){const o=s(e);t.style.animationDelay=`${o}ms`,t.style.animationName="appear"}function i(){document.getElementById("hangers").remove();const e=document.querySelectorAll(".carousel__container"),t=e.length;let o,n=0;for(o=0;o<t;o+=1)e[o].classList.contains("hide")||(l(n,e[o]),n+=1);const r=document.getElementById("browse");l(n,r);const c=document.getElementById("dress-me");l(n,c);const i=s(n+1);setTimeout((()=>{e.forEach((e=>{e.classList.remove("invisible")})),r.classList.remove("invisible"),c.classList.remove("invisible")}),i)}function a(e,o=!0){window.DISABLE_SCROLL=!0;const n=e.target.closest(".carousel__container").querySelector(".carousel"),r=parseInt(n.getAttribute("data-index"),10),c=n.querySelectorAll(".carousel__item:not(.hide)"),s=c.length;let l;l=r>0?r-1:s-1,t(n,c,l),o&&setTimeout((()=>{window.DISABLE_SCROLL=!1}),500)}function d(e){clearInterval(window.BACK_INTERVAL),clearInterval(window.NEXT_INTERVAL),0!==e.button||e.altKey||e.ctrlKey||e.metaKey||e.shiftKey||(a(e,!1),window.BACK_INTERVAL=setInterval((()=>{a(e,!1)}),400))}function u(){clearInterval(window.BACK_INTERVAL),window.BACK_INTERVAL=null,setTimeout((()=>{window.DISABLE_SCROLL=!1}),500)}function m(e){" "!==e.key&&"Enter"!==e.key||a(e)}function L(e,o=!0){window.DISABLE_SCROLL=!0;const n=e.target.closest(".carousel__container").querySelector(".carousel"),r=parseInt(n.getAttribute("data-index"),10),c=n.querySelectorAll(".carousel__item:not(.hide)");let s;s=r<c.length-1?r+1:0,t(n,c,s),o&&setTimeout((()=>{window.DISABLE_SCROLL=!1}),500)}function E(e){clearInterval(window.BACK_INTERVAL),clearInterval(window.NEXT_INTERVAL),0!==e.button||e.altKey||e.ctrlKey||e.metaKey||e.shiftKey||(L(e,!1),window.NEXT_INTERVAL=setInterval((()=>{L(e,!1)}),400))}function A(){clearInterval(window.NEXT_INTERVAL),window.NEXT_INTERVAL=null,setTimeout((()=>{window.DISABLE_SCROLL=!1}),500)}function _(e){" "!==e.key&&"Enter"!==e.key||L(e)}function y(e){const o=parseInt(e.getAttribute("data-index"),10),n=e.querySelectorAll(".carousel__item:not(.hide)"),r=n.length;let c;do{c=Math.floor(Math.random()*r)}while(c===o);t(e,n,c)}function w(e){const t=e.target.closest(".carousel__container").querySelector(".carousel");window.DISABLE_SCROLL=!0,y(t),setTimeout((()=>{window.DISABLE_SCROLL=!1}),500)}function f(){window.DISABLE_SCROLL=!0;document.querySelectorAll(".carousel__container:not(.hide) .carousel").forEach((e=>{y(e)})),setTimeout((()=>{window.DISABLE_SCROLL=!1}),500)}function h(){const e=document.querySelectorAll(".carousel__container:not(.hide) .carousel");Array.from(e).forEach((e=>{const o=e.querySelectorAll(".carousel__item:not(.hide)");t(e,o,parseInt(e.getAttribute("data-index"),10))})),setTimeout((()=>{window.DISABLE_SCROLL=!1}),500)}(()=>{const e=document.querySelectorAll(".category__checkbox");Array.from(e).forEach((e=>{e.addEventListener("change",o)}))})(),document.getElementById("dress-me").addEventListener("click",n),(()=>{const e=document.querySelectorAll(".carousel-button--back");Array.from(e).forEach((e=>{e.addEventListener("keypress",m),e.addEventListener("mousedown",d),e.addEventListener("mouseup",u)}));const t=document.querySelectorAll(".carousel-button--next");Array.from(t).forEach((e=>{e.addEventListener("keypress",_),e.addEventListener("mousedown",E),e.addEventListener("mouseup",A)}))})(),(()=>{const e=document.querySelectorAll(".carousel-button--randomize");Array.from(e).forEach((e=>{e.addEventListener("click",w)}));document.getElementById("browse").addEventListener("click",f)})(),(()=>{const e=document.querySelectorAll(".carousel__list");Array.from(e).forEach((e=>{e.addEventListener("scroll",r)}))})(),document.getElementById("seasons").addEventListener("change",c),window.addEventListener("load",(()=>{const e=document.getElementById("seasons");e.value!==e.getAttribute("data-default")&&c({target:e});const t=document.querySelectorAll(".category__checkbox");Array.from(t).forEach((e=>{const t=e.getAttribute("data-default");(e.checked&&!t||!e.checked&&t)&&o({target:e})})),setTimeout(i,1e3)})),window.addEventListener("resize",(()=>{window.DISABLE_SCROLL=!0,window.RESIZE_TIMEOUT&&clearTimeout(window.RESIZE_TIMEOUT),window.RESIZE_TIMEOUT=setTimeout(h,250)}))})();